<style media="screen">
    #map-canvas { height: 650px; }
</style>
<div id="map-canvas"></div>
<script type="text/javascript">
<<<<<<< HEAD
    $.get("http://172.16.3.118:5000/airData", function(data){

    // don't forget to include leaflet-heatmap.js
    var testData = {
    max: 5,
    data: data }    
    var baseLayer = L.tileLayer(
    'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
        attribution: '...',
        maxZoom: 30
    }
    );

    var cfg = {
        // radius should be small ONLY if scaleRadius is true (or small radius is intended)
        // if scaleRadius is false it will be the constant radius used in pixels
        "radius": 0.013,
        "maxOpacity": .5,
        // scales the radius based on map zoom
        "scaleRadius": true,
        // if set to false the heatmap uses the global maximum for colorization
        // if activated: uses the data maximum within the current map boundaries
        //   (there will always be a red spot with useLocalExtremas true)
        "useLocalExtrema": true,
        // which field name in your data represents the latitude - default "lat"
        latField: 'latitude',
        // which field name in your data represents the longitude - default "lng"
        lngField: 'longitude',
        // which field name in your data represents the data value - default "value"
        valueField: 'count'
    };


    var heatmapLayer = new HeatmapOverlay(cfg);

    var map = new L.Map('map-canvas', {
    center: new L.LatLng(47.42767, 8.532961),
    zoom: 13,
    layers: [baseLayer, heatmapLayer]
    });

    heatmapLayer.setData(testData);

    });
=======
    var air_datas = []
    $.get("http://172.16.3.118:5000/airData", function(data){
        air_datas = data;
        var map = L.map('map').setView([air_datas[0].latitude, air_datas[0].longitude], 15);
        L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
            attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
            maxZoom: 18,
            id: 'mapbox.streets',
            accessToken: 'pk.eyJ1IjoibWFpbm5pbmUiLCJhIjoiY2sxeGg2cDQ3MGJtdjNvcWd4aWplMnFtMCJ9.6QkdiBXn6IMmw8MFEe455g'
        }).addTo(map);

        for (var i = 0; i < air_datas.length; i++) {
            var circle = L.circle([air_datas[i].latitude, air_datas[i].longitude], {
                color: 'red',
                fillOpacity: 0.3,
                radius: air_datas[i].air_quality * 50
            }).addTo(map);
        }
    })
>>>>>>> 20f2807dc8b1df7b3baeb3772dab10ec9043d9f3
</script>
